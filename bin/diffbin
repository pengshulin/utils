#!/bin/sh
# diff between two binary files

CMDNAME=`basename $0`

if [ $# != 2 ] ; then
    echo "$CMDNAME FILE1 FILE2"
    exit 1
fi

PREFIX='/dev/shm/diffbin'
DUMP1="$PREFIX-1.dump"
DUMP2="$PREFIX-2.dump"

test -f $1 || exit 1
test -f $2 || exit 1

hexdump -C $1 > $DUMP1
hexdump -C $2 > $DUMP2

if [ $CMDNAME = 'colordiffbin' ] ; then
    colordiff $DUMP1 $DUMP2
else
    diff $DUMP1 $DUMP2
fi
